{% extends "base.html" %}
{% block title %}My Reservations{% endblock %}

{% block content %}
<div class="container">
    <!-- Welcome Message -->
    <div class="text-center my-5">
        <h2>Welcome, {{ user.first_name|default:user.username }}!</h2>
        <p>
            Enjoy a unique boat dining experience! Each reservation is for the entire boat, with a capacity of 4 to 20 guests. 
            The 2-hour trip includes dining while traveling between the start and end destinations. Operating hours: 
            <strong>10:00 AM to 10:00 PM, Monday through Friday.</strong>
        </p>
        <p>
            Reservations must be made at least <strong>2 days in advance</strong>. We look forward to welcoming you aboard!
        </p>
        <!-- Call-to-Action -->
        <a href="{% url 'reservations:reservation_create' %}" class="btn btn-primary btn-lg my-4">Create a Reservation</a>
    </div>

    <!-- Reservation Table -->
    {% if user.is_staff %}
        <h2 class="text-center">All Reservations</h2>
    {% else %}
        <h2 class="text-center">Your Upcoming Reservations</h2>
    {% endif %}
    
    <table class="table table-bordered table-hover mt-4">
    <tr>
        {% if user.is_staff %}
        <th>First Name</th>
        <th>Last Name</th>
        <th>Phone Number</th>
    {% else %}
        <th style="display:none;">First Name</th>
        <th style="display:none;">Last Name</th>
        <th style="display:none;">Phone Number</th>
    {% endif %}
        <th>Boat</th>
        <th>Date</th>
        <th>Time Slot</th>
        <th>Guests</th>
        <th>Actions</th>
    </tr>
    {% for reservation in reservations %}
    <tr>
        <td>{{ reservation.boat.name }}</td>
        <td>{{ reservation.booking_date }}</td>
        <td>{{ reservation.time_slot }}</td>
        <td>{{ reservation.number_of_guests }}</td>
        <td>
            <a href="{% url 'reservations:reservation_edit' reservation.pk %}">Edit</a>
            <a href="{% url 'reservations:reservation_delete' reservation.pk %}">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>
</div>
{% endblock %}